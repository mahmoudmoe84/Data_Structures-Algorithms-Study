(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[433],{u9HR:function(e,t,r){"use strict";r.d(t,"a",(function(){return FreeResponseQuestion})),r.d(t,"b",(function(){return Y}));var a=r("ODXe"),n=r("DZdY"),o=r("E+oP"),s=r.n(o),l=r("q1tI"),i=r.n(l),c=r("/MKj"),m=r("YA6q");function freeResponseServiceRequest({endpoint:e,baseUrl:t,data:r={},query:a={},method:n="GET",logAndSwallowErrors:o=!0,jwt:s}){const l=s?{Authorization:`Bearer ${s}`}:{};e.startsWith("/")&&(e=e.slice(1));const i=`${t}/${e}`;return Object(m.a)({endpoint:i,query:a,data:r,method:n,headers:l}).then(Object(m.b)({logAndSwallowErrors:o,errorMessage:`Unable to fetch data from free response service endpoint: ${i}`}))}var b=r("wtdv"),d=r("69pQ");const selectFreeResponseQuestions=e=>e.entities.freeResponseQuestions.byId;var u=r("2oex"),p=r("AZlx"),g=r("yy36"),h=r("Rab/"),w=r("yrBZ"),f=r("QeHJ"),E=r("QqFe"),O=r("kMW1"),j=r("uz3z"),v=r("uQrA"),S=r("l78e"),y=r("+uSs"),A=r("/VKx"),x=r("FZcb"),R=r("630U"),_=r("veT5");const k=Object(n.a)(_.a,{target:"eonrvtf13",label:"FreeResponseMarkdown"})("font-size:1rem;font-weight:normal;a{color:",(({theme:e})=>e.colors.yellow),";}"),L=Object(n.a)("div",{target:"eonrvtf12",label:"LoadingPlaceholder"})("height:",(({height:e})=>{switch(e){case"regular":return"1rem";case"title":return"1.5rem";default:return`${e}rem`}}),";background-color:",(({color:e,theme:t})=>{switch(e){case"purple":return R.r.purple[600];case"white":return t.colors["gray-100"];default:return"transparent"}}),";",(({width:e})=>"icon"===e?"\n      width: 1.125rem;\n      border-radius: 50%;\n      margin-right: 0.625rem;\n    ":`\n      width: ${e};\n      border-radius: 2px;\n      margin-right: 0;\n    `)," margin-bottom:",(({margin:e=0})=>`${e}rem`),";"),FormPromptMarkdown=({prompt:e,notPersisted:t})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(k,{text:e}),i.a.createElement(C,{fontWeight:"base"},t&&"Note - Your response will not be persisted")),z=Object(n.a)(j.GridForm,{target:"eonrvtf11",label:"FRQForm"})({name:"17m5zgh",styles:"padding:2.5rem;p{font-size:1rem;}label{width:100%;margin-right:0;margin-bottom:1rem;>:last-child{margin-bottom:0;}}textarea{min-height:5.25rem;margin-bottom:0.25rem;}>div{grid-row-gap:0;}button{margin-bottom:0;}"}),C=Object(n.a)(v.a,{target:"eonrvtf10",label:"NotPersistedText"})({name:"1v43pgp",styles:"margin-bottom:0.5rem;display:block"}),q=Object(n.a)(S.a,{target:"eonrvtf9",label:"HintAccordion"})("background-color:",Object(R.B)("colors.navy-600"),";svg{color:",(({theme:e})=>e.colors.white),";}"),F=Object(n.a)(y.a,{target:"eonrvtf8",label:"OverrideHintButton"})({name:"15ux3gy",styles:"display:flex;justify-content:space-between;width:100%;padding:0.125rem 1rem 0 1rem;height:2.625rem"}),M=Object(n.a)("div",{target:"eonrvtf7",label:"OpenHintLabel"})("color:",(({theme:e})=>e.colors.white),";"),P=Object(n.a)(k,{target:"eonrvtf6",label:"HintMarkdown"})("padding:1rem;color:",(({theme:e})=>e.colors.white),";"),$=Object(n.a)(f.a,{target:"eonrvtf5",label:"AnswerLabel"})("color:",(({theme:e})=>e.colors.lightBlue),";margin-bottom:0.375rem;"),B=Object(n.a)(k,{target:"eonrvtf4",label:"CompletedMarkdown"})("color:",(({theme:e})=>e.colors.white),";p{font-size:1rem;}pre>pre{margin-bottom:0;}margin-bottom:1rem;"),D=Object(n.a)(B,{target:"eonrvtf3",label:"AnswerMarkdown"})({name:"8dk3vg",styles:"margin-bottom:1rem"}),H=Object(n.a)(D,{target:"eonrvtf2",label:"ExampleMarkdown"})({name:"ol9ofu",styles:"font-size:0.875rem"}),Q=Object(n.a)(A.a,{target:"eonrvtf1",label:"LoadingSubmitWrapper"})({name:"15uh7i",styles:"justify-content:flex-end;p{font-size:1rem;}"}),U=Object(n.a)("div",{target:"eonrvtf0",label:"LoadingFormWrapper"})({name:"zssgrw",styles:"padding:2.5rem"}),LoadingForm=()=>i.a.createElement(U,null,i.a.createElement(L,{color:"purple",height:"regular",width:"75%",margin:1}),i.a.createElement(L,{color:"purple",height:10,width:"100%",margin:1}),i.a.createElement(L,{color:"transparent",height:5.25,width:"100%",margin:1}),i.a.createElement(Q,{flex:!0},i.a.createElement(x.a,{disabled:!0},i.a.createElement(f.a,null,"Submit Response")))),FreeResponseQuestionAnswer=({answer:e,prompt:t,sampleResponse:r,setShowAnswer:a})=>i.a.createElement(w.a,{p:32},i.a.createElement(B,{text:t}),i.a.createElement($,null,"Your response"),i.a.createElement(D,{text:e}),r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{fontSize:"sm"},"Our answer"),i.a.createElement(H,{text:r})),i.a.createElement(w.b,{justifyContent:"flex-end"},i.a.createElement(E.e,{mode:"dark",onClick:()=>a(!1)},i.a.createElement(O.a,{size:14}),"  Edit Response")));var W=r("vsgj");const Accordion=({hint:e})=>{const t=Object(l.useState)(!1),r=Object(a.a)(t,2),n=r[0],o=r[1];return i.a.createElement(q,{expanded:n,top:i.a.createElement(F,{onClick:()=>o(!n),expanded:n},i.a.createElement(M,null,i.a.createElement(v.a,{fontWeight:"base"},"Stuck? Get a Hint")))},i.a.createElement(P,{text:e}))},FreeResponseQuestionForm=({notPersisted:e,prompt:t,onSubmit:r,isLoading:a,hint:n,answer:o})=>i.a.createElement(i.a.Fragment,null,a?i.a.createElement(LoadingForm,null):i.a.createElement(z,{fields:[{label:i.a.createElement(FormPromptMarkdown,{prompt:t,notPersisted:e}),name:"freeResponseAnswer",size:12,type:"textarea",validation:{required:W.validationMessage},defaultValue:o}],onSubmit:r,submit:{contents:W.submitCta,position:"right",size:12},validation:"onChange"}),n&&i.a.createElement(Accordion,{hint:n}));const N=Object(n.a)(b.a,{target:"e1fg1vma0",label:"MarginFrame"})({name:"1yp7290",styles:"margin-bottom:2rem"}),PresentationalFRQ=({answer:e,showAnswer:t,setShowAnswer:r,prompt:a,sampleResponse:n,notPersisted:o,onSubmit:s,isLoading:l,hint:c})=>i.a.createElement(N,{title:"Free Response Question",testId:"free-response-container"},t?i.a.createElement(FreeResponseQuestionAnswer,{answer:e,prompt:a,sampleResponse:n,setShowAnswer:r}):i.a.createElement(FreeResponseQuestionForm,{notPersisted:o,prompt:a,onSubmit:s,isLoading:l,hint:c,answer:e})),FreeResponseQuestion=({id:e})=>{const t=Object(l.useState)(""),r=Object(a.a)(t,2),n=r[0],o=r[1],m=Object(l.useState)(Boolean(n)),b=Object(a.a)(m,2),w=b[0],f=b[1],E=Object(l.useState)(!1),O=Object(a.a)(E,2),j=O[0],v=O[1],S=Object(c.useDispatch)(),y=Object(c.useSelector)(g.eb),A=Object(c.useSelector)(p.b),x=Object(c.useSelector)(h.b),R=Object(c.useSelector)(h.f),_=Object(c.useSelector)(selectFreeResponseQuestions)[e],k=!_||!j,L=Object(c.useSelector)(u.q),z=null==L?void 0:L.id,C=Object(l.useCallback)((async({freeResponseAnswer:t})=>{let r=!0,a=t;if(z&&!R)try{const r=await freeResponseServiceRequest({baseUrl:A,jwt:y,endpoint:`articles/${z}/free_response_questions/${e}`,method:"POST",data:{response:t},logAndSwallowErrors:!1});a=r.response}catch(e){r=!1}r&&a&&(o(a),n===a&&f(!0))}),[A,z,e,R,y,n]);Object(l.useEffect)((()=>{s()(_)&&S(Object(d.a)({id:e,draft:x,bypassCache:R}))}),[S,_,e,x,R]);const q=Object(l.useCallback)((async()=>{let t;try{const r=await freeResponseServiceRequest({baseUrl:A,jwt:y,endpoint:`articles/${z}/free_response_questions/${e}`,logAndSwallowErrors:!1});t=r.response}catch(e){t=""}o(t),v(!0)}),[A,z,e,y]);return Object(l.useEffect)((()=>{z?q():v(!0)}),[S,y,A,z,e,q]),Object(l.useEffect)((()=>{n&&f(!0)}),[n]),i.a.createElement(PresentationalFRQ,{answer:n,showAnswer:w,setShowAnswer:f,onSubmit:C,prompt:null==_?void 0:_.prompt,sampleResponse:null==_?void 0:_.sample_response,notPersisted:Boolean(!z||R),isLoading:k,hint:null==_?void 0:_.hint})},Y=["id"]},vsgj:function(e){e.exports=JSON.parse('{"submitCta":"Submit Response","submitConfirmation":"Your response has been submitted.","validationMessage":"Please submit a response"}')}}]);
//# sourceMappingURL=433.32cbaa427a5874e802db.chunk.js.map